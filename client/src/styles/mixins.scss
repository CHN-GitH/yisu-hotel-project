@import './variables.scss';

// 文字省略
@mixin ellipsis($lines: 1) {
  @if $lines == 1 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// 弹性布局
@mixin flex($direction: row, $justify: flex-start, $align: stretch, $wrap: nowrap) {
  display: flex;
  flex-direction: $direction;
  justify-content: $justify;
  align-items: $align;
  flex-wrap: $wrap;
}

// 绝对定位
@mixin absolute($top: null, $right: null, $bottom: null, $left: null) {
  position: absolute;
  top: $top;
  right: $right;
  bottom: $bottom;
  left: $left;
}

// 固定定位
@mixin fixed($top: null, $right: null, $bottom: null, $left: null) {
  position: fixed;
  top: $top;
  right: $right;
  bottom: $bottom;
  left: $left;
}

// 渐变背景
@mixin gradient($direction: 135deg, $start-color: $primary-color, $end-color: $primary-dark) {
  background: linear-gradient($direction, $start-color 0%, $end-color 100%);
}

// 卡片样式
@mixin card($padding: $spacing-md, $radius: $radius-lg, $shadow: $shadow-md) {
  background: $bg-white;
  border-radius: $radius;
  padding: $padding;
  box-shadow: $shadow;
}

// 按钮基础样式
@mixin button-base {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: $spacing-sm $spacing-md;
  border-radius: $radius-md;
  font-size: $font-base;
  transition: all $transition-fast;
  
  &:active {
    opacity: 0.8;
    transform: scale(0.98);
  }
}

// 安全区域底部
@mixin safe-area-bottom {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

// 1px 边框
@mixin hairline($position: bottom, $color: $border-color) {
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    background-color: $color;
    
    @if $position == bottom {
      left: 0;
      right: 0;
      bottom: 0;
      height: 1px;
      transform: scaleY(0.5);
      transform-origin: 0 100%;
    } @else if $position == top {
      left: 0;
      right: 0;
      top: 0;
      height: 1px;
      transform: scaleY(0.5);
      transform-origin: 0 0;
    } @else if $position == left {
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      transform: scaleX(0.5);
      transform-origin: 0 0;
    } @else if $position == right {
      top: 0;
      bottom: 0;
      right: 0;
      width: 1px;
      transform: scaleX(0.5);
      transform-origin: 100% 0;
    }
  }
}